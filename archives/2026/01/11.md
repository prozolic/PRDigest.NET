### 目次 {#table-of-contents}
1. [#122843 Fix System.Timers.Timer Stop() not working after setting AutoReset or Interval on disabled one-shot timer](#122843)
2. [#120640 Improve code coverage for System.Security.Cryptography.Xml](#120640)

---
### [#122843](https://github.com/dotnet/runtime/pull/122843) Fix System.Timers.Timer Stop() not working after setting AutoReset or Interval on disabled one-shot timer {#122843}
- 作成者: [@Copilot](https://github.com/apps/copilot-swe-agent)
- 作成日時: 2026年01月03日 22:45:23(UTC)
- マージ日時: 2026年01月11日 03:17:01(UTC)
- ラベル: <span style="background-color: #d4c5f9; color: #000000; display: inline-block; padding: 0 7px; font-size:12px; font-weight:500; line-height:18px; border-radius:2em; border:1px solid transparent; white-space:nowrap; cursor:default;">area-System.ComponentModel</span>
#### 概要
`System.Timers.Timer`の一度限りのタイマー(`AutoReset=false`)で、発火後に`Interval`または`AutoReset`を設定すると、タイマーが意図せず再起動してしまい、その後`Stop()`が機能しなくなるバグを修正しました。`UpdateTimer()`メソッドに`_enabled`フラグのチェックを追加することで、無効化されたタイマーの再起動を防ぎます。

```csharp
private void UpdateTimer()
{
    if (_timer is null || !_enabled)
    {
        return;
    }
    int i = (int)Math.Ceiling(_interval);
    _timer.Change(i, _autoReset ? i : Timeout.Infinite);
}
```

#### 変更内容
- **Timer.cs**: `UpdateTimer()`メソッドに`!_enabled`チェックを追加し、無効状態のタイマーが再起動されないようにしました
- **TimerTests.cs**: 既存テスト`TestTimerStartAutoReset`を修正し、`AutoReset`変更後に明示的に`Start()`を呼び出すように更新。新規テストとして`SettingAutoResetOrIntervalOnDisabledOneShotTimerDoesNotRestartIt`を追加し、無効なタイマーの再起動防止を検証

#### パフォーマンスへの影響
影響なし

#### 関連Issue
#33119

#### その他
- **破壊的変更**: この修正により、バグの挙動に依存していたコードは、プロパティ変更後に明示的に`Start()`を呼び出す必要があります
- **リスク低**: .NET Framework以降存在していた長年のバグで、最小限の防御的チェックを追加するのみです
- **リグレッション**: なし。全7877件のSystem.ComponentModel.TypeConverterテストが合格

---
### [#120640](https://github.com/dotnet/runtime/pull/120640) Improve code coverage for System.Security.Cryptography.Xml {#120640}
- 作成者: [@Copilot](https://github.com/apps/copilot-swe-agent)
- 作成日時: 2025年10月11日 17:47:04(UTC)
- マージ日時: 2026年01月11日 01:32:52(UTC)
- ラベル: <span style="background-color: #d4c5f9; color: #000000; display: inline-block; padding: 0 7px; font-size:12px; font-weight:500; line-height:18px; border-radius:2em; border:1px solid transparent; white-space:nowrap; cursor:default;">area-System.Security</span> <span style="background-color: #f49cb1; color: #000000; display: inline-block; padding: 0 7px; font-size:12px; font-weight:500; line-height:18px; border-radius:2em; border:1px solid transparent; white-space:nowrap; cursor:default;">test-enhancement</span>
#### 概要
System.Security.Cryptography.Xml ライブラリの単体テストカバレッジを大幅に向上させるプルリクエストです。特に `CanonicalXmlEntityReference` クラスのカバレッジを 0% から 92.8% に引き上げ、XML正規化変換、エンティティ参照、ハッシング処理などをカバーする複数の新規テストケースが追加されています。

#### 変更内容
- **CanonicalXmlEntityReferenceTest.cs** (+168行)：6つのテストケースを追加（通常、サブセット、コメント、排他的、ハッシング、複数エンティティシナリオ）
- **DataObjectTests.cs** (+152行)：データオブジェクト関連テストを追加
- **EncryptedXmlTests.cs** (+1369行)：XML暗号化機能の包括的なテストを追加
- **SignedXmlTests.cs** (+289行)：XML署名関連の広範なテストを追加
- **ReferenceTest.cs** (+203行)、**SignatureTest.cs** (+217行) 等：その他暗号化関連クラスの新規テスト
- **System.Security.Cryptography.Xml.Tests.csproj**：新規テストファイルを登録

合計 15 ファイルで約 2,852 行のテストコードが追加されました。

#### パフォーマンスへの影響
影響なし。このプルリクエストはテストコードの追加のため、ランタイムパフォーマンスへの影響はありません。テスト実行時間は増加しますが、本体コードの実装に変更はありません。

#### 関連Issue
なし

#### その他
- 作成者による概要に「XML文字列フォーマットをシングルクォートからダブルクォートに修正」と記載されており、テストコード内で XML 文字列フォーマットの一貫性改善も行われた可能性があります
- Copilot による自動生成・レビュー された PR であり、複数のレビュアーによる確認が進行中です
- テストカバレッジの大幅向上により、System.Security.Cryptography.Xml ライブラリの品質保証が強化されます

---
